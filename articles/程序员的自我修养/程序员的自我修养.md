# 程序员的自我修养 #

## 编译和链接 ##

### 编译 ###

> **预处理 -> 编译 -> 汇编 -> 链接**

**预处理**

> 处理*#*开头的预编译指令，#include，#define

1. 宏定义展开，#define
2. 预编译指令，#if
3. 删除注释
4. 添加行号和文件名标识，用于错误和警告
5. 保留所有的#pragma编译指令

**编译**：词法、语法、语义分析和优化后生成相关的汇编代码文件

1. 词法分析：有限状态机将代码划分为一系列的token，lex程序
2. 词法分析：语法分析生成语法树，yacc工具
3. 语义分析：是否符合语义表达，每个表达式标识类型
4. 中间代码生成，将编译器分为前后端
5. 目标代码生成和优化：根据目标机器生成代码，并对其进行优化

**汇编**：汇编翻译为机器指令

**链接**：地址和空间分配、符号决议、重定位

# 目标文件有什么 #

## ELF文件格式 ##

**文件头**：描述整个文件的属性，包括文件是否可执行、静态链接还是动态链接何入口地址、目标硬件、目标操作系统等信息，还有一个段表，描述文件中各个段在文件中的偏移位置及段的属性

1. 机器代码保存在.text段
2. 已初始化的全局变量和局部静态变量存放在.data段
3. 未初始化的全局变量和局部静态变量存放在.bbs段，只记录占用空间大小，为其预留位置

